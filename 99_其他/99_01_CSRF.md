
Views.py
```python
from django.http import HttpResponse

text = """<form method="post" action="/add/">
    <input type="text" name="a" value="%d"> + <input type="text" name="b" value="%d">
    <input type="submit" value="="> <input type="text" value="%d">
</form>"""

def index(request):
    if 'a' in request.POST:
        a = int(request.POST['a'])
        b = int(request.POST['b'])
    else:
        a = 0
        b = 0
    return HttpResponse(text % (a, b, a + b))
```

urls.py

```python
from django.conf.urls import url
from django.contrib import admin
from . import helloworld, add

urlpatterns = [
    url(r'^admin/', admin.site.urls),
    url(r'^$', helloworld.index),
    url(r'^add/$', add.index),
]
```




访问 <http://localhost:8000/add>

点击提交之后，你会看到下面这个信息：
![](images/Pasted%20image%2020240623183745.png)




这是由于Django默认启动了防止CSRF（Cross-site request forgery：跨站请求伪造，是一种对网站的恶意利用）攻击的安全设置。本章暂不讨论这方面的内容，我们通过装饰器（decorator）关闭这个设置。

修改add.py文件：

```python
from django.http import HttpResponse
from django.views.decorators.csrf import csrf_exempt

text = """<form method="post" action="/add/">
    <input type="text" name="a" value="%d"> + <input type="text" name="b" value="%d">
    <input type="submit" value="="> <input type="text" value="%d">
</form>"""


@csrf_exempt
def index(request):
    if 'a' in request.POST:
        a = int(request.POST['a'])
        b = int(request.POST['b'])
    else:
        a = 0
        b = 0
    return HttpResponse(text % (a, b, a + b))
```

你会看到和我相似的界面，然后输入整数试一试吧。
